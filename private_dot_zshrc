# --- Zimfw home ---
export ZIM_HOME="$HOME/.zim"

# --- Cargar sólo el loader correcto ---
if [[ -f /opt/homebrew/opt/zimfw/share/zimfw.zsh ]]; then
  # macOS Apple Silicon (brew)
  source /opt/homebrew/opt/zimfw/share/zimfw.zsh init

elif [[ -f /usr/local/opt/zimfw/share/zimfw.zsh ]]; then
  # macOS Intel (brew)
  source /usr/local/opt/zimfw/share/zimfw.zsh init

elif [[ -f /usr/share/zimfw/zimfw.zsh ]]; then
  # Linux (paquete distro)
  source /usr/share/zimfw/zimfw.zsh init

elif [[ -f "$ZIM_HOME/zimfw.zsh" ]]; then
  # Instalador oficial
  source "$ZIM_HOME/zimfw.zsh" init

else
  echo "⚠️ zimfw.zsh no encontrado"
fi

# --- Cargar configuración ---
source "$ZIM_HOME/init.zsh"


# https://unix.stackexchange.com/a/389883
# Bash and zsh have different defaults. Zsh doesn't save the history to a file by default.
# MacOS comes with a system configuration file (/etc/zshrc) that sets
# up a few things including a slightly fancier prompt and per-terminal history.
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt appendhistory

# Guardar timestamp (epoch) en el historial
setopt EXTENDED_HISTORY

# Formato de fecha al mostrar history (no afecta al archivo)
HIST_STAMPS="yyyy-mm-dd"

# eval "$(fnm env --use-on-cd --shell zsh)"

bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down

export PATH="$HOME/.asdf/shims:$HOME/.asdf/bin:$PATH"
export PATH=$PATH:~/.local/bin

# JAVA
# JAVA_HOME dinámico según asdf
export JAVA_HOME="$(asdf where java)"
export PATH="$JAVA_HOME/bin:$PATH"

# XDG directorios
export XDG_CONFIG_HOME="$HOME/.config"

# Use systemd user ssh-agent (avoid GNOME gcr ssh-agent quirks)
export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/ssh-agent.socket"

